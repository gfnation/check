<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
         <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.7/angular-route.min.js">
</script>

    
    <title>It's a Start</title>
    
<body>
<!-- The hardest part about this file is what needs to be in Angular and what doesnt.
        Bootstrap handles most of the responsiveness.
-->
    
<div id="container">    

    
    
    <div id="client">
        <div class='header'>
             
            <li class="list-group-item" style="text-align:center;">Header
                <a href="#">
                    <span class="glyphicon glyphicon-off"></span>
                </a>
            </li>   
            
        </div>
    
        <div class="userList">
        <li class="list-group-item">Userlist, will be scrollable</li>
            <li class="list-group-item">1st User</li>
            <li class="list-group-item">2nd User</li>
            <li class="list-group-item">3rd User</li>
        </div>
        <!-- ng-app="chatApp" 
                ng-controller="chatCtrl"-->
        <!-- ng-repeat="x in feed" -->
        <!-- ng-model="chatMe" -->
        <!-- ng-click="???" -->
            <!-- <div class="chatWindow"> -->
                <div class="msg" id="App" ng-app="sendApp" ng-controller="chatCtrl">
                    <div>
                    <ul class="messages">
                    <li class="list-group-item2" ng-repeat="x in feed track by $index" >{{x}}</li></ul>
                    </div>
                        <div class="bottom">
                            <form ng-submit="enter()">
                                <button type="submit" class="btn btn-primary btn-sm-12"id="sendbt">Send</button>
                                <input ng-model="chatMe" type="text" class="form-control input-sm" id="inputsm">  
                            </form>
                        </div>
                    </div>
            <!-- </div> -->
                </div>
                 

            
                <!-- x in feed referrs to ng-repeat which mirror an an array at that location. -->
        <!-- <div class="chatbar" ng-app="chatApp" ng-controller="chatCtrl">
               <input ng-model="chatMe" class="form-control input-sm" id= "inputsm" type="text"> 
               <button ng-click="addItem()" type="button" class="btn btn-primary btn-sm"id="sendbt">Send</button>
        </div> -->
        
    </div> <!--Client -->

    <!-- <div class="URL" ng-app="myApp" ng-controller="myCtrl">
        <p>The url of this page is:</p>
        <h3>{{myUrl}}</h3>
         -->
        <!--Useful, but this is just to check if angular is working -->
    <!-- </div> -->

 <!--Container -->
    
    

    
  <!--Eventually styles will be separate. -->
    
    <style> 
        .URL{
            margin: auto;
            text-align: center;
            padding-top: 50px;
            }
        #container{
            
            }
        #client{
            width:70%;
            height:50%;
            margin:auto;
                }
        .msg{
            position: absolute;
            width: 53.5%;
            max-width: 700px;
            height: 500px;
            background-color: #fff;
            left: 45%;
            top: 24.50%;
            transform: translateX(-25%) translateY(-25%);
            background-color: #f8f8f8;
            overflow: hidden;
            border-radius:5px;
            /*width:100%;
            min-height:400px;
            overflow:scroll;
            background-color: #f8f8f8;*/

            /*display:inline-block;*/
            
            /*justify-content: space-between;
            flex-direction: column;
            height: 100vh;*/
            /*display: flex;*/
            }
        .messages
        { 
            
            position: relative;
            list-style: none;
            padding: 10px 10px 0 10px;
            margin: 0;
            height: 250px;
            overflow: scroll;
        }
        .messages .message{
            clear: both;
            overflow: hidden;
            margin-bottom: 20px;
            opacity: 0;

        }
        .list-group-item2{
            font-size: 18px;
            padding-left: 10px;
            background: #19B5FE;
            margin: 15px;
            font-color: #22313F;
        }
        
        .header{
            
                }
        .userList{
            width:24%;
            display:inline-block;
            float:left;  
            }
        .bottom{
            position: relative;
            width: 100%;
            background-color: #1E8BC3;
            padding: 20px 20px;
            position: absolute;
            bottom: 0;
            
        }
        .bottom_wrapper .message_input_wrapper {
            display: inline-block;
            height: 50px;
            border-radius: 25px;
            border: 1px solid #bcbdc0;
            width: calc(100% - 160px);
            position: relative;
            padding: 0 20px;
        }

        .bottom_wrapper .message_input_wrapper .message_input{
            
            border: none;
            height: 100%;
            box-sizing: border-box;
            width: calc(100% - 40px);
            position: absolute;
            outline-width: 0;
            color: gray;
        }
        #inputsm
        {
            
            width: 60%;
            height: 30px;
            /*bottom: 0;*/
           /* width:45%;
            float:right;
            bottom: 0;
            position: relative;
            bottom: 100px; 
            right: 300px;
            overflow: hidden;
            justify-content: flex-end;
            display: flex;*/
           
        }
         #sendbt
        { 
           text-align: center;
           background-color:#3A539B;
           height: 30px;
           float: left;
            
        }
        
        
        .glyphicon.glyphicon-off
        {
            
            float: left;
        }
    </style>
        <!-- ng-app="chatApp" -->
        <!-- ng-controller="chatCtrl"-->
        <!-- ng-repeat="x in feed" -->
        <!-- ng-model="chatMe" -->
        <!-- ng-click="addItem()" -->
    
    <script>            
        /* 
        var app = angular.module('myApp', []);
app.controller('myCtrl', function($scope, $location) {
    $scope.myUrl = $location.absUrl();
});         
        */
  
    var datURL = 'http://localhost:8080/t/send_message?c_id=fb0250eb8d439defa91d2433e06f3dec&source=src&message='
   //We need to passs the URL in pieces. To give a unique message $scope.chatMe is concatenated to the rest of the URL.
    
        
      
   
var app = angular.module("sendApp", []); 
app.controller("chatCtrl", function($scope,$http) {
    $scope.feed = ["Angular is up"];
    $scope.enter = function () {
        if(this.chatMe){
        $scope.feed.push($scope.chatMe);
        $scope.chatMe = " ";
        //allows to submit using enter key
        }
    $scope.submit= function(){
    console.log('Clicked Submit');
        var datScope = $scope.chatMe
        
        
        $http({
        url:  datURL.concat(datScope),
        method: 'PUT',
        data: $scope.data
        })
        .then(function (httpResponse) { 
        console.log('response:', httpResponse);
        })
  
        
        $http({
        url:  'http://localhost:8080/t/get_messages?c_id=CONVERSATIONID&source=SOURCEUSERID&message=RAWMESSAGE',
        method: 'GET',
        data: $scope.data
        })
        .then(function (httpResponse) { 
        console.log('response:', httpResponse);
        })
        
        
        //http://localhost:8080/t/get_messages?c_id=CONVERSATIONID&source=SOURCEUSERID&message=RAWMESSAGE
        
   }
    
    // Submits feed using send_message method, done as a post within the angular $scope.data
        
    
    //"CORS" might need to be necessary to fully test this environment, it is a useful chrome extension
    
    //'fb0250eb8d439defa91d2433e06f3dec'
   
    }    
});
      
var app = angular.module("upApp", []);
app.controller("myCtrl", function($scope,$http) {
  
});


             
</script>
    

    
    
</body>
</html>
 <!-- Data source 

Modules
directives: Extend HTML, Bind data
scope: Js objects generated normally DATA 
expressions: Linked to scoped 
services

Data bindings, when one changes, the other changes as well

-->
