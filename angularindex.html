<!DOCTYPE html>
<html>
    <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> 
    </head>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
         <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.7/angular-route.min.js">
</script>

    
    <title>It's a Start</title>
    
<body>
<!-- The hardest part about this file is what needs to be in Angular and what doesnt.
        Bootstrap handles most of the responsiveness.
-->
    
<div id="container">    

    
    
    <div id="client">
        <div class='header'>
            <li class="list-group-item" style="text-align:center;">Header</li>   
            
        </div>
    
        <div class="userList">
        <li class="list-group-item">Userlist, will be scrollable</li>
            <li class="list-group-item">1st User</li>
            <li class="list-group-item">2nd User</li>
            <li class="list-group-item">3rd User</li>
        </div>
        <!-- ng-app="chatApp" 
                ng-controller="chatCtrl"-->
        <!-- ng-repeat="x in feed" -->
        <!-- ng-model="chatMe" -->
        <!-- ng-click="???" -->
             <div class="msg" id="App" ng-app="sendApp" ng-controller="chatCtrl">
                <li class="list-group-item">First item</li>
                <li class="list-group-item" ng-repeat="x in feed track by $index" >{{x}}</li>
         
                    <input ng-model="chatMe" type="text" class="form-control input-sm" id="inputsm"> 

                  <button ng-click="addItem()" type="button" class="btn btn-primary btn-sm"id="sendbt" >Send</button>

                  

                   
        </div>
                 

            
                <!-- x in feed referrs to ng-repeat which mirror an an array at that location. -->
        <!-- <div class="chatbar" ng-app="chatApp" ng-controller="chatCtrl">
               <input ng-model="chatMe" class="form-control input-sm" id= "inputsm" type="text"> 
               <button ng-click="addItem()" type="button" class="btn btn-primary btn-sm"id="sendbt">Send</button>
        </div> -->
        
    </div> <!--Client -->
    <div class="URL" ng-app="myApp" ng-controller="myCtrl">
        <p>The url of this page is:</p>
        <h3>{{myUrl}}</h3>
        
        <!--Useful, but this is just to check if angular is working -->
    </div>
</div> <!--Container -->
    
    

    
  <!--Eventually styles will be separate. -->
    
    <style> 
        .URL{
            margin: auto;
            text-align: center;
            padding-top: 50px;
            }
        #container{
            
            }
        #client{
            width:70%;
            height:50%;
            margin:auto;
                }
        .msg{
            width:75%;
            min-height:200px;
            max-height:200px;
            overflow-y:scroll;
            display:inline-block;
            
            }
        .header{
            
                }
        .userList{
            width:24%;
            display:inline-block;
            float:left;  
            }
         #sendbt
        {
            width:10%;
            display:inline-block;
            float:right;
            padding-left:3px;
            position: fixed;
            bottom: 400px; 
            right: 741px;
            overflow: hidden;
        }
        #inputsm
        {
            width:45%;
            bottom: 0;
            position: fixed;
            bottom: 400px; 
            right: 170px;
            overflow: hidden;
        }
    </style>
        <!-- ng-app="chatApp" -->
        <!-- ng-controller="chatCtrl"-->
        <!-- ng-repeat="x in feed" -->
        <!-- ng-model="chatMe" -->
        <!-- ng-click="addItem()" -->
    
    <script>            
        /* 
        var app = angular.module('myApp', []);
app.controller('myCtrl', function($scope, $location) {
    $scope.myUrl = $location.absUrl();
});         
        */
  
    var datURL = 'http://localhost:8080/t/send_message?c_id=fb0250eb8d439defa91d2433e06f3dec&source=src&message='
   //We need to passs the URL in pieces. To give a unique message $scope.chatMe is concatenated to the rest of the URL.
    
        
      
   
var app = angular.module("sendApp", []); 
app.controller("chatCtrl", function($scope,$http) {
    $scope.feed = ["Angular is up"];
    $scope.addItem = function () {
        $scope.feed.push($scope.chatMe);
        
    $scope.submit= function(){
    console.log('Clicked Submit');
        var datScope = $scope.chatMe
        
        
        $http({
        url:  datURL.concat(datScope),
        method: 'PUT',
        data: $scope.data
        })
        .then(function (httpResponse) { 
        console.log('response:', httpResponse);
        })
  
        
        $http({
        url:  'http://localhost:8080/t/get_messages?c_id=CONVERSATIONID&source=SOURCEUSERID&message=RAWMESSAGE',
        method: 'GET',
        data: $scope.data
        })
        .then(function (httpResponse) { 
        console.log('response:', httpResponse);
        })
        
        
        //http://localhost:8080/t/get_messages?c_id=CONVERSATIONID&source=SOURCEUSERID&message=RAWMESSAGE
        
   }
    
    // Submits feed using send_message method, done as a post within the angular $scope.data
        
    
    //"CORS" might need to be necessary to fully test this environment, it is a useful chrome extension
    
    //'fb0250eb8d439defa91d2433e06f3dec'
   
    }    
});
      
var app = angular.module("upApp", []);
app.controller("myCtrl", function($scope,$http) {
  
});


             
</script>
    

    
    
</body>
</html>
 <!-- Data source 

Modules
directives: Extend HTML, Bind data
scope: Js objects generated normally DATA 
expressions: Linked to scoped 
services

Data bindings, when one changes, the other changes as well

-->

